# 心路历程

自己写着记录一下的，没什么好看的。（既然写了肯定是希望有人看的啦）

实际上，我并不是一个专业的程序工程师。大学的学习实在是太粗浅了，以至于我的程序完全跟不上时代。我对于nodejs的了解几乎为0，仅限于用npm下下包，复制一下教程的代码装一下依赖的程度，你看上面，我这个包都没传到npm上。（已经传了）我自认水平有限，但好在我觉得自己的审美还算是可以的。我觉得，koishi无疑是美的，因为她（因为是恋恋所以没毛病）无论是从生态上还是设计理念上都是美的。在面对专业的程序工程师的时候，我常常感到自卑，感觉自己无法融入，大气都不敢喘一口。尽管有些不自量力，但我也想接近大佬们，让自己能多少不处于鄙视链的最底层。开发一个koishi的插件就是一个很好的机会。

从市场来看，插件的开发者也是参差不齐的，很多连网站也没有，甚至连依赖的koishi版本都不太对。那，如果我用接近官方插件的思路，开发一个优质（自认为）插件，是不是就能离这个目标近一点了呢？

## 命令

那么，好吧，先从什么地方开始呢？

从命令开始吧。从[分析](20230317分析.md)可以看到，有两种命令类型，简单的和复杂的。

简单的很简单，空格隔开传递参数，很符合koishi原装的commend

那复杂的其实就是掷骰了。

掷骰其实也可以使用koishi原装的命令解决，用空格隔开传递参数，因为在信息上是可以等价的，但这不符合跑团玩家的使用习惯。

或者就直说吧，不符合我的使用习惯，我代表不了跑团玩家。

那要怎么解决呢？

一种是，把"r"当做一个命令，只用一个空格隔开，后面的全当参数传进去之后再处理。实际上，我看到有机器人也是这么做的，但我不确定是不是这个原因。管他呢。总之，我不乐意这么做。

然后我看到了[这个](https://koishi.chat/guide/basic/command.html#%E5%AE%9A%E4%B9%89%E5%8F%82%E6%95%B0)：

``` ts
ctx.command('market <area>')
  .shortcut(/^查(.+区)市场$/, { args: ['$1'] })
```
那实际上，用shortcut就能解决问题了。








